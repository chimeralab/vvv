<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<html><head>
<link rel="stylesheet" href="stap.css"></link>

<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBtfGeqBIXdFmaFkmjY004cvb3SWOKyy-c",
    authDomain: "vvve-56dc2.firebaseapp.com",
    databaseURL: "https://vvve-56dc2.firebaseio.com",
    projectId: "vvve-56dc2",
    storageBucket: "vvve-56dc2.appspot.com",
    messagingSenderId: "441698672673"
  };
  firebase.initializeApp(config);
</script>

<!-- <script src="https://rawgit.com/vdv7/stapjs/master/stap.js"></script> -->
<script src="stap.js"></script>
<script>

var datasetOrder=['Practice Trials','Batch 1','Batch 2','Batch 3','Batch 4'];
var nextButtons=['Experimental Trials','Batch 2','Batch 3','Batch 4','Submit'];

var TIME_ON_SHIPLEY = 300;

var myHighlights ={
'Practice Trials':[0,3,4],
'Batch 1':[2,4,12,18,19,20,27,31,33,39],
'Batch 2':[0,3,4,6,10,14,26,28,33,35],
'Batch 3':[0,3,7,9,11,12,14,18,21,26],
'Batch 4':[1,12,19,23,29,31,33,35,36,37]
};


var datasets={

	'Practice Trials':[
				["11:18",69,"Russia","FTP - Suspicious MGET Command"],
				["21:50",513,"Chile","Suspicious Browser Redirect"],
				["12:12",80,"China","FTP CWD Root directory transversal attempt"],
				["4:20",42,"Hungary","FTP - Suspicious MGET Command"],
				["19:26",9898,"China","ET TROJAN Qhosts Trojan Check-in"]
	],
	
	'Batch 1':[
				["4:40",2745,"Hungary","FTP CWD Root directory virus attempt"],
["0:19",6257,"Russia","Suspicious Browser Redirect"],
["13:52",42,"Hungary","FTP STOR overflow attempt.exploit"],
["3:48",2302,"Russia","ET TROJAN W32/Sality Executable Pack Digital Signature ASCII Marker"],
["14:46",9119,"China","Javascript Exploit CVE-2012-09-10a"],
["3:20",9119,"Russia","INFO web virus 0x0 gif attempt"],
["1:31",21,"China","INFO web virus 0x0 gif attempt"],
["1:24",69,"Russia","FTP Satan Scan"],
["11:15",5554,"Russia","FTP STOR overflow attempt"],
["1:25",7,"China","MULTIMEDIA Quicktime User Agent exploit"],
["1:37",500,"Russia","Suspicious Browser Redirect"],
["0:52",6666,"China","ET TROJAN Qhosts Trojan Check-in"],
["10:55",443,"China","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["1:37",7,"India","Chat Encrypted Yahoo IM Message"],
["0:44",6257,"United States","ET TROJAN Sality Variant Downloader Activity"],
["5:12",21,"Russia","ET TROJAN Sality - Encrypted Opera User-Agent"],
["8:43",9119,"China","NETBIOS SMB-DS winreg access"],
["4:52",139,"China","INFO web virus 0x0 gif attempt"],
["24:13",7,"China","ET TROJAN Sality - Encrypted Opera User-Agent"],
["3:12",5234,"India","MULTIMEDIA Quicktime User Agent exploit"],
["4:31",2206,"China","Chat Encrypted Yahoo IM Message"],
["2:26",5554,"Russia","Javascript Exploit CVE-2012-09-10a"],
["1:25",70,"Russia","Rar Encrypted File Transfer"],
["0:49",5234,"Thailand","ET TROJAN Qhosts Trojan Check-in"],
["2:54",5554,"China","FTP CWD Root directory virus attempt"],
["3:38",6257,"China","Suspicious Browser Redirect"],
["4:17",6257,"China","FTP STOR overflow attempt.exploit"],
["0:53",9119,"China","XMLHttpRequest attempt"],
["1:24",7,"China","FTP STOR overflow attempt.exploit"],
["2:22",5554,"Russia","MULTIMEDIA Quicktime User Agent exploit"],
["3:32",6257,"Russia","FTP CWD Root directory virus attempt"],
["1:46",80,"Canada","FTP CWD Root directory virus attempt"],
["2:19",69,"China","FTP CWD Root directory virus attempt"],
["1:37",42,"Russia","FTP CWD Root directory virus attempt"],
["2:26",6257,"Russia","INFO Connection Closed MSG from Suspicious Port"],
["1:31",53,"China","MULTIMEDIA Quicktime User Agent exploit"],
["4:40",5554,"China","FTP STOR overflow attempt.exploit"],
["0:25",21,"China","FTP - Suspicious MGET Command"],
["5:12",9119,"Russia","Javascript Exploit CVE-2012-09-10a"],
["0:34",80,"Hungary","Chat Encrypted Yahoo IM Message"]

	],
	
	'Batch 2':[
["2:43",80,"Russia","INFO Connection Closed MSG from Suspicious Port"],
["2:22",5554,"Russia","MULTIMEDIA Quicktime User Agent exploit"],
["1:31",7,"China","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["20:34",5234,"Russia","Javascript Exploit CVE-2012-09-10a"],
["0:19",6666,"United States","Rar Encrypted File Transfer"],
["5:39",7,"Thailand","Rar Encrypted File Transfer"],
["3:35",9119,"Thailand","Javascript Exploit CVE-2012-09-10a"],
["1:37",42,"Russia","FTP CWD Root directory virus attempt"],
["5:53",80,"China","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["1:31",6666,"China","FTP CWD Root directory virus attempt"],
["3:20",139,"China","FTP Satan Scan"],
["9:39",80,"Russia","Suspicious Browser Redirect"],
["0:30",9119,"Russia","Rar Encrypted File Transfer"],
["0:31",42,"China","ET TROJAN Sality - Encrypted Opera User-Agent"],
["24:36",80,"Russia","Javascript Exploit CVE-2012-09-10a"],
["1:22",6666,"Russia","FTP CWD Root directory virus attempt"],
["3:38",80,"China","XMLHttpRequest attempt"],
["3:20",9119,"Russia","INFO web virus 0x0 gif attempt"],
["1:29",5234,"Russia","Chat Encrypted Yahoo IM Message"],
["4:52",7,"Hungary","FTP - Suspicious MGET Command"],
["2:26",6257,"Russia","INFO Connection Closed MSG from Suspicious Port"],
["5:32",53,"China","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["3:12",7,"Russia","ET TROJAN Sality - Encrypted Opera User-Agent"],
["5:12",9119,"Romania","FTP CWD Root directory virus attempt"],
["8:58",42,"Hungary","Chat Encrypted Yahoo IM Message"],
["1:24",2302,"China","ET TROJAN Qhosts Trojan Check-in"],
["5:12",21,"Russia","ET TROJAN Sality - Encrypted Opera User-Agent"],
["1:25",7,"China","MULTIMEDIA Quicktime User Agent exploit"],
["11:32",7,"Thailand","FTP CWD Root directory virus attempt"],
["17:45",80,"Russia","Suspicious Browser Redirect"],
["4:23",6257,"Russia","FTP CWD Root directory virus attempt"],
["4:33",69,"Russia","Chat Encrypted Yahoo IM Message"],
["1:57",69,"Russia","Suspicious Browser Redirect"],
["21:27",6257,"Thailand","Chat Encrypted Yahoo IM Message"],
["2:43",6257,"Thailand","Suspicious Browser Redirect"],
["1:42",70,"Russia","Javascript Exploit CVE-2012-09-10a"],
["3:25",6257,"Russia","Suspicious Browser Redirect"],
["5:12",9119,"Russia","IRC Command, Control, and Scanning Tool Download"],
["23:21",53,"Canada","Javascript Exploit CVE-2012-09-10a"],
["3:35",6666,"China","FTP CWD Root directory virus attempt"]
	],
	
	'Batch 3':[
["3:20",21,"Chile","ET TROJAN Sality Variant Checkin Activity"],
["5:39",5234,"Russia","MULTIMEDIA Quicktime User Agent exploit"],
["1:37",5554,"China","INFO web virus 0x0 gif attempt"],
["3:38",69,"China","WEB-CGI webspeed access"],
["5:12",21,"Russia","ET TROJAN Sality - Encrypted Opera User-Agent"],
["10:44",9119,"Russia","ET TROJAN W32/Sality Executable Pack Digital Signature ASCII Marker"],
["7:14",7,"Russia","XMLHttpRequest attempt"],
["20:34",9119,"China","NETBIOS SMB-DS winreg access"],
["15:32",5234,"Russia","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["0:49",1725,"Russia","FTP STOR overflow attempt.exploit"],
["4:17",6257,"China","FTP STOR overflow attempt.exploit"],
["0:35",5554,"Chile","ET TROJAN Sality Variant Checkin Activity"],
["3:58",5554,"Russia","FTP Satan Scan"],
["1:29",5098,"Russia","INFO Connection Closed MSG from Suspicious Port"],
["5:43",6257,"China","MULTIMEDIA Quicktime User Agent exploit"],
["3:13",21,"China","FTP - Suspicious MGET Command"],
["2:26",5554,"Russia","Javascript Exploit CVE-2012-09-10a"],
["3:13",9119,"Thailand","INFO Connection Closed MSG from Suspicious Port"],
["0:11",9119,"Russia","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["5:32",69,"China","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["0:34",6257,"Hungary","MULTIMEDIA Quicktime User Agent exploit"],
["1:55",2302,"China","ET TROJAN Sality - Encrypted Opera User-Agent"],
["1:14",5098,"China","FTP CWD Root directory virus attempt"],
["2:47",69,"India","MULTIMEDIA Quicktime User Agent exploit"],
["1:31",53,"China","MULTIMEDIA Quicktime User Agent exploit"],
["20:34",53,"Russia","Chat Encrypted Yahoo IM Message"],
["1:24",7,"China","FTP STOR overflow attempt.exploit"],
["1:41",7,"Russia","MULTIMEDIA Quicktime User Agent exploit"],
["0:18",69,"Romania","XMLHttpRequest attempt"],
["17:45",53,"Russia","FTP Satan Scan"],
["2:43",80,"Russia","INFO Connection Closed MSG from Suspicious Port"],
["24:46",53,"Chile","FTP CWD Root directory virus attempt"],
["2:12",5554,"Russia","INFO web virus 0x0 gif attempt"],
["3:13",69,"Russia","ET TROJAN Sality - Encrypted Opera User-Agent"],
["3:48",70,"China","Rar Encrypted File Transfer"],
["11:55",2302,"China","FTP - Suspicious MGET Command"],
["0:52",53,"Russia","Chat Encrypted Yahoo IM Message"],
["19:38",80,"Russia","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["2:19",69,"China","FTP CWD Root directory virus attempt"],
["3:25",6257,"Russia","Suspicious Browser Redirect"]
	],
	
	'Batch 4':[
				["2:25",5554,"Russia","INFO Connection Closed MSG from Suspicious Port"],
["3:38",6257,"China","Suspicious Browser Redirect"],
["4:40",80,"China","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["4:31",3074,"Russia","NETBIOS SMB-DS winreg access"],
["9:43",6666,"Canada","FTP - Suspicious MGET Command"],
["4:33",69,"Russia","Chat Encrypted Yahoo IM Message"],
["2:26",5554,"China","MULTIMEDIA Quicktime User Agent exploit"],
["2:44",5234,"Russia","ET TROJAN Sality Variant Downloader Activity"],
["4:40",5554,"China","FTP STOR overflow attempt.exploit"],
["5:32",53,"China","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["13:39",443,"China","ET TROJAN Sality - Encrypted Opera User-Agent"],
["3:48",70,"Russia","Suspicious Browser Redirect"],
["0:47",6257,"Russia","NETBIOS SMB-DS winreg access"],
["10:24",5098,"China","Chat Encrypted Yahoo IM Message"],
["21:27",4664,"China","Javascript Exploit CVE-2012-09-10a"],
["0:47",9119,"India","NETBIOS SMB-DS winreg access"],
["4:40",443,"Russia","ET TROJAN Sality - Encrypted Opera User-Agent"],
["1:24",21,"Russia","MULTIMEDIA Quicktime User Agent exploit"],
["4:17",42,"Canada","ET TROJAN Qhosts Trojan Check-in"],
["19:39",443,"Russia","FTP - Suspicious MGET Command"],
["1:37",42,"Russia","FTP CWD Root directory virus attempt"],
["3:12",443,"Russia","Chat Encrypted Yahoo IM Message"],
["0:35",1755,"China","Chat Encrypted Yahoo IM Message"],
["1:31",21,"China","FTP CWD Root directory virus attempt"],
["2:54",5554,"China","FTP CWD Root directory virus attempt"],
["2:31",7,"China","MULTIMEDIA Quicktime User Agent exploit"],
["5:32",70,"Russia","Chat Encrypted Yahoo IM Message"],
["1:42",70,"Russia","Javascript Exploit CVE-2012-09-10a"],
["3:25",7,"Canada","FTP Satan Scan"],
["10:55",9119,"China","MULTIMEDIA Quicktime User Agent exploit"],
["1:44",9119,"Hungary","Rar Encrypted File Transfer"],
["4:40",2784,"Thailand","INFO web virus 0x0 gif attempt"],
["3:24",9119,"Russia","MULTIMEDIA Quicktime User Agent exploit"],
["1:31",21,"China","INFO web virus 0x0 gif attempt"],
["4:52",5098,"Russia","ET TROJAN Virus.Win32.Sality.aa Checkin"],
["1:41",7,"Russia","MULTIMEDIA Quicktime User Agent exploit"],
["13:52",5234,"Russia","ET TROJAN W32/Sality Executable Pack Digital Signature ASCII Marker"],
["0:18",70,"Russia","FTP STOR overflow attempt"],
["0:19",6257,"Russia","Suspicious Browser Redirect"],
["1:42",70,"Russia","Javascript Exploit CVE-2012-09-10a"]
	]
};



function shuffleBatches() {
	var a=['Batch 1','Batch 2','Batch 3','Batch 4']
	var j, x, i;
	for (i = a.length - 1; i > 0; i--) {
		j = Math.floor(Math.random() * (i + 1));
		x = datasets[a[i]];
		datasets[a[i]] = datasets[a[j]];
		datasets[a[j]] = x;
		x = myHighlights[a[i]];
		myHighlights[a[i]] = myHighlights[a[j]];
		myHighlights[a[j]] = x;
	}
}


function button(name,enabled){
	var b={['@'+name]:false};
	if(enabled!==undefined)b.eB=enabled;
	return b;
}



var task = {
	
	////////////////////////
	/////// CONSENT! ///////
	////////////////////////
	start: function(){
	    shuffleBatches();
		task.updateUI( {
			template:"clairescratch.css",
			require:{ options:['T','R','title','eT','select','head','patronym','scroll','time','emp'], types:['table'] },
			client:["userAgent","screen"],
			date:(new Date()).toString('YYYYMDhhmmss')
		} );
		task.updateUI(["<h1>Informed Consent Agreement</h1>",
			"Please read this consent agreement carefully before you decide to participate in the study.",
			"Purpose of the research study: The purpose of the study is to investigate how humans recognize patterns of interest.",
			"What you will do in the study: If you choose to participate in this study, you will be asked to identify malicious versus benign patterns in a series of datasets using pre-established rules. The information you provide is anonymous and you are free to stop the experiment at any time.",
			"Time required: The study will require about 25-30 minutes of your time.",
			"Risks: There are no risks associated with this study. The information you will provide is not sensitive and a loss of confidentiality poses no threats.",
			"Benefits: There are no direct benefits to you for participating in this research study. The study may help us understand what factors impair pattern recognition.",
			"Confidentiality: Participant data will be stored on Amazon Firebase, a secure cloud-based platform. Only mTurk-assigned worker IDs---which consist of random characters (e.g. A1235875436)---will be stored for payment purposes. No personally identifying information (e.g., names, emails, addresses) will be collected. The information that you give in the study will be handled confidentially. Your data will be anonymous which means that your name will not be collected or linked to the data.",
			"Voluntary participation: Your participation in the study is completely voluntary.",		
			"Right to withdraw from the study: You have the right to withdraw from the study at any time without penalty. How to withdraw from the study: If you want to withdraw from the study, you may simply close the study. There is no penalty for withdrawing. You will still receive full credit for the study. If you would like to withdraw after your materials have been submitted, please contact Claire La Fleur (claire.g.lafleur.ctr@mail.mil).",	
			"Payment: You will receive a base payment of $2.50 for participating in the study and a bonus of $1.50 for scoring above 70%.",	
			"If you have questions about the study, contact:",	
			"Claire-Genevieve La Fleur (claire.g.lafleur.ctr@mail.mil)",	
			"Bldg. 519, Aberdeen Proving Ground",	
			"U.S. Army Research Laboratory, Aberdeen, MD 21005",						
			button("I Consent") ]);
	},

	/////////////////////////////////
	/////// ALL OTHER SCREENS ///////
	/////////////////////////////////
	userAction: function(time,element,value){
		console.log(time,element,value);
		

		////////////////////////////////////
		/////   SHIPLEYS INSTRUCTIONS  /////
		////////////////////////////////////
		if(element=='I Consent'){
			task.updateUI(null);
			task.updateUI(["<h1>Shipley's Abstractions</h1>", "Fill in the missing letter, number, or word to complete each sequence. Write only one character in each blank space.", "<p class='redtext'>YOU WILL HAVE FIVE MINUTES TO COMPLETE THE TASK<\p>"
				, button("Begin Task") 
			]);
		}
		
	
		
		/////////////////////////////
		/////   SHIPLEYS TASK   /////
		/////////////////////////////
		if(element=='Begin Task'){
			task.updateUI(null);
			task.updateUI([
				{"@floatBar":[
					{'@Time Remaining':TIME_ON_SHIPLEY,'time':'m:s'}, 
					{'@Time Remaining':0,'T':TIME_ON_SHIPLEY,'R':4},
					{'@Instructions':"Fill in the missing letter,<br> number, or word to complete each<br> sequence. Write only one character <br> in each blank space."},
					{"@Complete":false}
				], title:''}
			]);
		task.updateUI([   {'@Shipley':[
			["Pattern", "Answer Here (*'s = # of Letters/Numbers Needed)"],
			['1 2 3 4 5 _',{"@":"*",eT:2}], 
			['White black short long down _ _',{"@":"**",eT:2}],
			['AB BC CD D_',{"@":"*",eT:2}],  
			['Z Y X W V U _',{"@":"*",eT:2}],
			['1 2 3 2 1 2 3 4 3 2 3 4 5 4 3 4 5 6 _ _',{"@":"**",eT:2}],
			['NE/SW SE/NW E/W N/ _',{"@":"*",eT:2}],  
			['Escape scape cape _ _ _',{"@":"***",eT:2}],  
			['Oh ho rat tar mood _ _ _ _',{"@":"****",eT:2}],  
			['A Z B Y C X D _ _',{"@":"**",eT:2}],  
			['Tot tot bard drab 537 _ _ _',{"@":"***",eT:2}],  
			['Mist is wasp as pint in toneâ€™ _ _',{"@":"**",eT:2}],  
			['57326 73265 32657 26573 _ _ _ _ _',{"@":"*****",eT:2}],  
			['Knit in spud up both to stay _ _',{"@":"**",eT:2}],  
			['Scotland landscape scape goat  _ _ _ _ ee',{"@":"****",eT:2}],  
			['Surgeon 1234567 snore 17635 rogue _ _ _ _ _',{"@":"*****",eT:2}],  
			['Tam tan rib rid rat raw hip _ _ _',{"@":"***",eT:2}],
			['Tar pitch throw saloon bar rod fee tip end plank _ _ _ _ _ meals',{"@":"*****",eT:2}],  
			['3124 82 73 154 46 13 _',{"@":"*",eT:2}],  
			['Lag leg pen pin big bog rob _ _ _',{"@":"***",eT:2}],  
			['Two w four r one o three _',{"@":"*",eT:2}]
				] , type:'table', head:1,select:1,patronym:1, scroll:1
				}])	
		}
			
		

		////////////////////////
		///// INSTRUCTIONS /////
		////////////////////////
		if(element=='Complete' || element=='Time Remaining'){
			task.updateUI(null);
			task.updateUI(["<h1>Instructions</h1>",
				"In the following task, will see several tables, or batches, that contain a series of cyber events - some of them are benign and some represent potential threats. Your job is to identify all the events in each batch that represent a credible cyber threat using the rules provided", "RULES: You will be shown a set of rules at the top of the screen for each batch. If a particular event meet the criteria for a threat as described in the rules, then you should mark it as a concern. When you have identified all the credible threats in a batch, click submit at the top of the screen to move on to the next batch.", "HINTS: Some of the events will be highlighted; these are events that an automated intrusion detection system has identified as suspicious activity; the performance of the IDS is ALWAYS better than chance", "<p class='redtext'>The rules and the accuracy of the intrusion detection system MAY CHANGE between batches.<p class='redtext'>", "You have unlimited time to complete the task.<br><br>"
				, button("Practice Trials") 
			]);
		}
		
		///////////////////////////////////////////////	
		///////    Reminder of Instructions!    ///////	
		///////////////////////////////////////////////	
		else  if(element=='Experimental Trials'){
			task.updateUI(null);
			task.updateUI(["<h1>Instructions Reminder</h1>",
				"You've completed your practice trials! As a reminder, you will see several tables, or batches, that contain a series of cyber events - some of them are benign and some represent potential threats. Your job is to identify all the events in each batch that represent a credible cyber threat using the rules provided", "RULES: You will be shown a set of rules at the top of the screen for each batch. If a particular event meet the criteria for a threat as described in the rules, then you should mark it as a concern. When you have identified all the credible threats in a batch, click submit at the top of the screen to move on to the next batch.", "HINTS: Some of the events will be highlighted; these are events that an automated intrusion detection system has identified as suspicious activity; the performance of the IDS is ALWAYS better than chance", "<p class='redtext'>The rules and the accuracy of the intrusion detection system MAY CHANGE between batches.<p class='redtext'>", "You have unlimited time to complete the task.<br><br>"
				, button("Batch 1") 
			]);
		}
		
		
		////////////////////////
		////// DEBRIEFING //////
		////////////////////////
		else if(element=='Submit'){
			task.updateUI(null);
			task.updateUI([{'@Your MTurk validation number is':(new Date()).getTime()}])
			task.updateUI(["<h1>Debriefing</h1>", 
				"To effectively defend against cyber security threats, one must consider both the technological and human dimensions (Von Solms, 2013; Kraemer, 2009). The defense analyst performs a crucial role by anticipating, understanding, and coordinating an efficient and successful response to ongoing cyber threats. This study was concerned with how certain qualities of the data environment make a cyber defenders job more difficult. In the present experiment, we were interesting in evaluating out how increasing the amount of information to process, decreasing the time to make a decision, decreasing the veracity of the information presented, and increasing the variety of information available impacted your ability to identify threatening patterns in a batch of cyber events. In our future work, we hope to develop agents to help reduce the impacts of these factors on the human cyber defender.",
				"Our hope is to better understand how these factors impact cyber defender performance so that we can assist soldiers in identifying and eliminating cyber threats. If you are interested in reading more about this type of work, please review the following citations.",
				"What is I want to know more?",
				"Buchler, N., Fitzhugh, S. M., Marusich, L. R., Ungvarsky, D. M., Lebiere, C., & Gonzalez, C. (2016). Mission command in the age of network-enabled operations: Social network analysis of information sharing and situation awarenss. Frontiers in Psychology, 7, 1-15. ", 
				"Kraemer, S., Carayon, P., & Clem, J. (2009). Human and organization factor in computer and information security: Pathways to vulnerabilities. Computers & Security, 28, 509-520. ",
				"If you have any concerns with your rights as a participant in this experiment, please contact Claire La Fleur, Primary Investigator, Army Research Lab at 410-306-1249 or (claire.g.lafleur.ctr@mail.mil)",
				"Thank you again for your participation."
			]);
			////////////////////////
			///// FINISH TASK! /////		
			////////////////////////
			task.end();
		}

		//////////////////////
		///// ALL TRIALS /////
		//////////////////////
		else  if(element in datasets){
			task.nextButton=nextButtons[datasetOrder.indexOf(element)];
			task.currentResponses=new Array(datasets[element].length);
			task.updateUI(null);
			task.updateUI([
				{"@floatBar":[
					{'@':["<p class='yellowhighlight'>HIGHLIGHTED EVENTS ARE IDENTIFIED AS THREATS<br><br>BY AN INTRUSTION DETECTION SYSTEM. HOWEVER, <br><br>  <strong>THESE IDENTIFICATIONS MAY NOT BE ACCURATE.<\p>"]},
					{'@':["<p class='redtext'>EVENTS ARE THREATS IF THEY <br>MEET ALL FOUR CRITERIA:<\p>",
						"1. Time Stamp between 0:00 and 5:00 hours",
						"2. Source Port < 80 or > 5,000",
						"3. Destination Countries: Russia, China",
						"4. Alerts including suspicious, encrypted, exploit, and virus"
					]},
					button(task.nextButton,0)
				], title:''}, 
				{['@'+element]:[
				["Time Stamp","Source Port","Destination Countries","Alert","Threat","No Threat"], 
				] , type:'table', head:1,patronym:1, scroll:1}
			]);

			for(var i=0;i<datasets[element].length;++i){
				console.log([i, myHighlights[element], myHighlights[element].indexOf(i)] );
				task.updateUI([   {['@'+element]:
					[ task.formatRow(datasets[element][i], myHighlights[element].indexOf(i) ) ] 
				}]);
			}
		}
		
		//added 5 lines below; also added line 506 to create the task.currentResponses array; also changed the button to be disabled to start, and enabled when all responses are there
		else if(task.currentResponses && element.constructor===Array){		//
			task.currentResponses[element[1]-1]=value;
			if(Math.min.apply(null,task.currentResponses)===1)
				task.updateUI([{"@floatBar":[button(task.nextButton,1)]}]);
			else
				task.updateUI([{"@floatBar":[button(task.nextButton,0)]}]);
		}
		
		
		
	},
	
	// add two radio buttons to each displayed record
	formatRow:function(rec,highlight){
		console.log(highlight);
		rec.push(button(''));
		rec.push(button(''));
		return {'@':rec,select:1,emp:(highlight>-1)?10:0};;
	}
	
}

logToFirebase();

</script>
</head><body /></html>
